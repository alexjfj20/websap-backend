"use strict";(self["webpackChunkwebsap"]=self["webpackChunkwebsap"]||[]).push([[260],{2949:function(e,a,o){o.d(a,{Bg:function(){return f},D2:function(){return g},Jo:function(){return y},Vg:function(){return b},ag:function(){return p},qW:function(){return h},xr:function(){return v}});var n=o(133),t=o(8982),r=o(7051);const s=3e4,i=3e5;let l=null,c=0,u=0,d=null,m=!1;async function p(){try{const e=await(0,t.By)();if(!e||0===Object.keys(e).length)return console.log("No hay informaci√≥n del negocio para sincronizar"),{success:!1,message:"No hay informaci√≥n del negocio para sincronizar"};console.log("Sincronizando informaci√≥n del negocio con el backend:",e);const a=localStorage.getItem("token");a&&n["default"].setToken(a);const o=await n["default"].get("/auth/me");if(!o||!o.success||!o.user||!o.user.restaurante_id)return console.warn("No se pudo obtener el restaurante del usuario actual"),{success:!1,message:"No se pudo obtener el restaurante del usuario actual"};const s=o.user.restaurante_id,i={nombre:e.name,descripcion:e.description,direccion:e.address,telefono:e.contact,logo:e.logo,informacion_pago:JSON.stringify(e.paymentInfo||{})},l=await n["default"].put(`/restaurantes/${s}`,i);return l&&l.success?(console.log("Informaci√≥n del negocio sincronizada con √©xito"),c=Date.now(),r.A.emit("business-info-updated",e),{success:!0,message:"Informaci√≥n del negocio sincronizada con √©xito",timestamp:c}):(console.warn("Error al sincronizar informaci√≥n del negocio:",l),{success:!1,message:l.message||"Error al sincronizar informaci√≥n del negocio"})}catch(e){return console.error("Error al sincronizar informaci√≥n del negocio:",e),{success:!1,message:e.message||"Error al sincronizar informaci√≥n del negocio"}}}async function v(e=!1){try{const o=Date.now();if(d&&!e&&o-u<i)return console.log("Usando informaci√≥n de negocio en cach√©"),d;const s=localStorage.getItem("token");s&&n["default"].setToken(s);const l=await n["default"].get("/auth/me");if(!l||!l.success||!l.user||!l.user.restaurante_id)throw console.warn("No se pudo obtener el restaurante del usuario actual"),new Error("No se pudo obtener el restaurante del usuario actual");const c=l.user.restaurante_id,m=await n["default"].get(`/restaurantes/${c}`);if(m&&m.success&&m.restaurante){const e=m.restaurante;let n={};try{e.informacion_pago&&(n=JSON.parse(e.informacion_pago))}catch(a){console.warn("Error al parsear informaci√≥n de pago:",a)}const s={name:e.nombre,description:e.descripcion,address:e.direccion,contact:e.telefono,logo:e.logo,paymentInfo:n};return await(0,t.AU)(s),d=s,u=o,r.A.emit("business-info-updated",s),console.log("Informaci√≥n del negocio obtenida con √©xito:",s),s}throw console.warn("Error al obtener informaci√≥n del negocio:",m),new Error(m?.message||"Error al obtener informaci√≥n del negocio")}catch(o){console.error("Error al obtener informaci√≥n del negocio desde el backend:",o);try{const e=await(0,t.By)();if(e)return e}catch(s){console.error("Error al obtener informaci√≥n local:",s)}throw o}}async function f(){try{const e=await(0,t.By)(),a=await v(!0),o=JSON.stringify(e),n=JSON.stringify(a),s=o!==n;return s&&(console.log("Se detectaron cambios en la informaci√≥n del negocio"),await(0,t.AU)(a),r.A.emit("business-info-updated",a)),s}catch(e){return console.error("Error al verificar cambios en informaci√≥n del negocio:",e),!1}}function g(e=!1){e?console.log("Sincronizaci√≥n de informaci√≥n del negocio desactivada (modo vista compartida)"):(l&&clearInterval(l),m||(v().catch((e=>console.error("Error en sincronizaci√≥n inicial:",e))),m=!0),l=setInterval((()=>{f().catch((e=>console.error("Error en verificaci√≥n peri√≥dica:",e)))}),s),console.log("Verificaci√≥n peri√≥dica de informaci√≥n del negocio iniciada"))}function b(){l&&(clearInterval(l),l=null,console.log("Verificaci√≥n peri√≥dica de informaci√≥n del negocio detenida"))}async function y(){try{const e=localStorage.getItem("token");e&&n["default"].setToken(e);const a=await n["default"].get("/restaurantes/migrate/add-informacion-pago");return a&&a.success?(console.log("Migraci√≥n ejecutada con √©xito:",a.message),{success:!0,message:a.message||"Migraci√≥n ejecutada con √©xito"}):(console.warn("Error al ejecutar migraci√≥n:",a),{success:!1,message:a.message||"Error al ejecutar migraci√≥n"})}catch(e){return console.error("Error al ejecutar migraci√≥n:",e),{success:!1,message:e.message||"Error al ejecutar migraci√≥n"}}}function h(){d=null,u=0}},8109:function(e,a,o){o.r(a),o.d(a,{default:function(){return He}});var n=o(641),t=o(33),r=o(3751);const s=["id"],i={key:0,class:"loading"},l={key:1,class:"error"},c={key:2,class:"menu-content"},u={key:0,class:"business-info"},d=["src"],m={class:"description"},p={key:1,class:"contact-info"},v={key:0},f={key:1},g={class:"menu-list"},b={class:"menu-items"},y={class:"item-image-container"},h=["src"],I={key:1,src:"https://via.placeholder.com/150?text=Sin+Imagen",alt:"Sin imagen disponible",class:"item-image"},k={class:"item-details"},L={class:"item-description"},E={class:"item-price"},w={key:0,class:"includes-drink"},C=["onClick","disabled"],D={key:0,class:"btn-icon"},N={key:1,class:"btn-icon"},P={key:0,class:"menu-list special-menu-list"},$={class:"menu-items"},q={class:"item-image-container"},S=["src"],R={key:1,src:"https://via.placeholder.com/150?text=Sin+Imagen",alt:"Sin imagen disponible",class:"item-image"},A={class:"item-details"},Q={class:"item-description"},_={class:"item-price"},X={key:0,class:"includes-drink"},M=["onClick","disabled"],x={key:0,class:"btn-icon"},T={key:1,class:"btn-icon"},F={class:"order-section",ref:"orderSection"},V={key:0,class:"empty-cart"},O={key:1,class:"cart-items"},J={class:"cart-item-details"},W={class:"cart-item-actions"},z=["onClick"],U={class:"quantity-display"},K=["onClick"],j=["onClick"],B={class:"cart-total"},H={class:"customer-form"},Y={class:"form-row"},Z={class:"form-row"},G={class:"form-row"},ee={class:"form-row"},ae={class:"payment-methods-selection"},oe={class:"payment-options"},ne={class:"payment-option"},te={class:"payment-option"},re={class:"payment-option"},se={class:"form-row"},ie={class:"order-actions"},le={class:"cart-items-count"},ce={key:2,class:"payment-section"},ue={class:"payment-methods"},de={key:0,class:"payment-method"},me=["src"],pe={key:1,class:"payment-method"},ve=["src"],fe={key:1,class:"payment-detail"},ge={key:2,class:"payment-method"},be={class:"payment-detail"},ye={key:3,class:"payment-method"},he={class:"payment-detail"},Ie={class:"reserva-section container mt-5"};function ke(e,a,o,ke,Le,Ee){const we=(0,n.g2)("ReservaForm");return(0,n.uX)(),(0,n.CE)("div",{class:"shared-menu-container",id:ke.menuId},[ke.isLoading?((0,n.uX)(),(0,n.CE)("div",i,a[10]||(a[10]=[(0,n.Lk)("div",{class:"spinner"},null,-1),(0,n.Lk)("p",null,"Cargando men√∫...",-1)]))):ke.error?((0,n.uX)(),(0,n.CE)("div",l,[(0,n.Lk)("p",null,(0,t.v_)(ke.error),1)])):((0,n.uX)(),(0,n.CE)("div",c,[ke.menuData?.businessInfo?((0,n.uX)(),(0,n.CE)("div",u,[ke.menuData.businessInfo.logo&&ke.isValidImage(ke.menuData.businessInfo.logo)?((0,n.uX)(),(0,n.CE)("img",{key:0,src:ke.fixImageFormat(ke.menuData.businessInfo.logo),alt:"Logo",class:"business-logo"},null,8,d)):(0,n.Q3)("",!0),(0,n.Lk)("h1",null,(0,t.v_)(ke.menuData.businessInfo.name),1),(0,n.Lk)("p",m,(0,t.v_)(ke.menuData.businessInfo.description),1),ke.menuData.businessInfo.contact||ke.menuData.businessInfo.address?((0,n.uX)(),(0,n.CE)("div",p,[ke.menuData.businessInfo.contact?((0,n.uX)(),(0,n.CE)("p",v,[a[11]||(a[11]=(0,n.Lk)("strong",null,"Contacto:",-1)),(0,n.eW)(" "+(0,t.v_)(ke.menuData.businessInfo.contact),1)])):(0,n.Q3)("",!0),ke.menuData.businessInfo.address?((0,n.uX)(),(0,n.CE)("p",f,[a[12]||(a[12]=(0,n.Lk)("strong",null,"Direcci√≥n:",-1)),(0,n.eW)(" "+(0,t.v_)(ke.menuData.businessInfo.address),1)])):(0,n.Q3)("",!0)])):(0,n.Q3)("",!0)])):(0,n.Q3)("",!0),(0,n.Lk)("div",null,[(0,n.Lk)("div",g,[a[13]||(a[13]=(0,n.Lk)("h2",null,"Nuestro Men√∫",-1)),(0,n.Lk)("div",b,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(ke.regularItems,((e,a)=>((0,n.uX)(),(0,n.CE)("div",{key:a,class:"menu-item"},[(0,n.Lk)("div",y,[e.image&&ke.isValidImage(e.image)?((0,n.uX)(),(0,n.CE)("img",{key:0,src:ke.fixImageFormat(e.image),alt:"Imagen del producto",class:"item-image"},null,8,h)):((0,n.uX)(),(0,n.CE)("img",I))]),(0,n.Lk)("div",k,[(0,n.Lk)("h3",null,(0,t.v_)(e.name),1),(0,n.Lk)("p",L,(0,t.v_)(e.description),1),(0,n.Lk)("p",E,"$"+(0,t.v_)(ke.formatPrice(e.price)),1),e.includesDrink?((0,n.uX)(),(0,n.CE)("p",w,"Incluye refresco")):(0,n.Q3)("",!0),(0,n.Lk)("button",{onClick:a=>ke.addToCart(e),class:(0,t.C4)(["add-to-cart-btn",{"disabled-btn":!e.realAvailability||e.realAvailability<=0}]),disabled:!e.realAvailability||e.realAvailability<=0},[!e.realAvailability||e.realAvailability<=0?((0,n.uX)(),(0,n.CE)("span",D,"‚ùå")):((0,n.uX)(),(0,n.CE)("span",N,"üõí")),(0,n.eW)(" "+(0,t.v_)(!e.realAvailability||e.realAvailability<=0?"No disponible":"A√±adir al pedido"),1)],10,C)])])))),128))])]),ke.specialItems.length>0?((0,n.uX)(),(0,n.CE)("div",P,[a[14]||(a[14]=(0,n.Lk)("h2",null,"Platos Especiales",-1)),(0,n.Lk)("div",$,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(ke.specialItems,((e,a)=>((0,n.uX)(),(0,n.CE)("div",{key:a,class:"menu-item special-item"},[(0,n.Lk)("div",q,[e.image&&ke.isValidImage(e.image)?((0,n.uX)(),(0,n.CE)("img",{key:0,src:ke.fixImageFormat(e.image),alt:"Imagen del producto",class:"item-image"},null,8,S)):((0,n.uX)(),(0,n.CE)("img",R))]),(0,n.Lk)("div",A,[(0,n.Lk)("h3",null,(0,t.v_)(e.name),1),(0,n.Lk)("p",Q,(0,t.v_)(e.description),1),(0,n.Lk)("p",_,"$"+(0,t.v_)(ke.formatPrice(e.price)),1),e.includesDrink?((0,n.uX)(),(0,n.CE)("p",X,"Incluye refresco")):(0,n.Q3)("",!0),(0,n.Lk)("button",{onClick:a=>ke.addToCart(e),class:(0,t.C4)(["add-to-cart-btn special-button",{"disabled-btn":!e.realAvailability||e.realAvailability<=0}]),disabled:!e.realAvailability||e.realAvailability<=0},[!e.realAvailability||e.realAvailability<=0?((0,n.uX)(),(0,n.CE)("span",x,"‚ùå")):((0,n.uX)(),(0,n.CE)("span",T,"üõí")),(0,n.eW)(" "+(0,t.v_)(!e.realAvailability||e.realAvailability<=0?"No disponible":"A√±adir al pedido"),1)],10,M)])])))),128))])])):(0,n.Q3)("",!0),(0,n.Lk)("div",F,[a[23]||(a[23]=(0,n.Lk)("h2",null,"Tu Pedido",-1)),0===ke.cartItems.length?((0,n.uX)(),(0,n.CE)("div",V,a[15]||(a[15]=[(0,n.Lk)("p",null,"Tu pedido est√° vac√≠o",-1),(0,n.Lk)("p",{class:"empty-cart-message"},"A√±ade productos del men√∫ para comenzar tu pedido",-1)]))):((0,n.uX)(),(0,n.CE)("div",O,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(ke.cartItems,((e,o)=>((0,n.uX)(),(0,n.CE)("div",{key:o,class:"cart-item"},[(0,n.Lk)("div",J,[(0,n.Lk)("h3",null,(0,t.v_)(e.name),1),(0,n.Lk)("p",null,"$"+(0,t.v_)(ke.formatPrice(e.price))+" x "+(0,t.v_)(e.quantity),1)]),(0,n.Lk)("div",W,[(0,n.Lk)("button",{onClick:e=>ke.decreaseQuantity(o),class:"quantity-btn"},"-",8,z),(0,n.Lk)("span",U,(0,t.v_)(e.quantity),1),(0,n.Lk)("button",{onClick:e=>ke.increaseQuantity(o),class:"quantity-btn"},"+",8,K),(0,n.Lk)("button",{onClick:e=>ke.removeFromCart(o),class:"remove-btn"},a[16]||(a[16]=[(0,n.Lk)("span",{class:"btn-icon"},"üóëÔ∏è",-1)]),8,j)])])))),128)),(0,n.Lk)("div",B,[(0,n.Lk)("h3",null,"Total: $"+(0,t.v_)(ke.formatPrice(ke.cartTotal)),1),(0,n.Lk)("div",H,[a[21]||(a[21]=(0,n.Lk)("h4",null,"Datos del Cliente",-1)),(0,n.Lk)("div",Y,[(0,n.bo)((0,n.Lk)("input",{type:"text","onUpdate:modelValue":a[0]||(a[0]=e=>ke.customerInfo.name=e),placeholder:"Nombres completos",class:"form-input"},null,512),[[r.Jo,ke.customerInfo.name]])]),(0,n.Lk)("div",Z,[(0,n.bo)((0,n.Lk)("input",{type:"tel","onUpdate:modelValue":a[1]||(a[1]=e=>ke.customerInfo.phone=e),placeholder:"Tel√©fono",class:"form-input"},null,512),[[r.Jo,ke.customerInfo.phone]])]),(0,n.Lk)("div",G,[(0,n.bo)((0,n.Lk)("input",{type:"email","onUpdate:modelValue":a[2]||(a[2]=e=>ke.customerInfo.email=e),placeholder:"Correo electr√≥nico",class:"form-input"},null,512),[[r.Jo,ke.customerInfo.email]])]),(0,n.Lk)("div",ee,[(0,n.bo)((0,n.Lk)("input",{type:"text","onUpdate:modelValue":a[3]||(a[3]=e=>ke.customerInfo.address=e),placeholder:"Direcci√≥n de entrega",class:"form-input"},null,512),[[r.Jo,ke.customerInfo.address]])]),(0,n.Lk)("div",ae,[a[20]||(a[20]=(0,n.Lk)("h4",null,"Forma de Pago",-1)),(0,n.Lk)("div",oe,[(0,n.Lk)("label",ne,[(0,n.bo)((0,n.Lk)("input",{type:"radio","onUpdate:modelValue":a[4]||(a[4]=e=>ke.selectedPaymentMethod=e),value:"qr",name:"paymentMethod"},null,512),[[r.XL,ke.selectedPaymentMethod]]),a[17]||(a[17]=(0,n.Lk)("span",{class:"payment-option-text"},"QR",-1))]),(0,n.Lk)("label",te,[(0,n.bo)((0,n.Lk)("input",{type:"radio","onUpdate:modelValue":a[5]||(a[5]=e=>ke.selectedPaymentMethod=e),value:"nequi",name:"paymentMethod"},null,512),[[r.XL,ke.selectedPaymentMethod]]),a[18]||(a[18]=(0,n.Lk)("span",{class:"payment-option-text"},"Nequi",-1))]),(0,n.Lk)("label",re,[(0,n.bo)((0,n.Lk)("input",{type:"radio","onUpdate:modelValue":a[6]||(a[6]=e=>ke.selectedPaymentMethod=e),value:"cash",name:"paymentMethod"},null,512),[[r.XL,ke.selectedPaymentMethod]]),a[19]||(a[19]=(0,n.Lk)("span",{class:"payment-option-text"},"Contra entrega",-1))])])]),(0,n.Lk)("div",se,[(0,n.bo)((0,n.Lk)("textarea",{"onUpdate:modelValue":a[7]||(a[7]=e=>ke.additionalMessage=e),placeholder:"Mensaje o instrucciones adicionales",class:"form-textarea"},null,512),[[r.Jo,ke.additionalMessage]])])]),(0,n.Lk)("div",ie,[(0,n.Lk)("button",{onClick:a[8]||(a[8]=(...e)=>ke.completeOrder&&ke.completeOrder(...e)),class:"complete-order-btn"},a[22]||(a[22]=[(0,n.Lk)("span",{class:"btn-icon"},"üì±",-1),(0,n.eW)(" Enviar por WhatsApp ")]))])])]))],512),ke.cartItems.length>0?((0,n.uX)(),(0,n.CE)("div",{key:1,class:"floating-cart-button",onClick:a[9]||(a[9]=(...e)=>ke.scrollToOrder&&ke.scrollToOrder(...e))},[(0,n.Lk)("span",le,(0,t.v_)(ke.totalItems),1),a[24]||(a[24]=(0,n.Lk)("span",null,"Ver Pedido",-1))])):(0,n.Q3)("",!0),ke.hasPaymentInfo?((0,n.uX)(),(0,n.CE)("div",ce,[a[31]||(a[31]=(0,n.Lk)("h2",null,"Forma de Pago",-1)),(0,n.Lk)("div",ue,[ke.menuData?.businessInfo?.paymentInfo?.qrImage?((0,n.uX)(),(0,n.CE)("div",de,[(0,n.Lk)("h3",null,(0,t.v_)(ke.menuData?.businessInfo?.paymentInfo?.qrTitle||"C√≥digo QR de Pago"),1),ke.menuData?.businessInfo?.paymentInfo?.qrImage&&ke.isValidImage(ke.menuData?.businessInfo?.paymentInfo?.qrImage)?((0,n.uX)(),(0,n.CE)("img",{key:0,src:ke.fixImageFormat(ke.menuData?.businessInfo?.paymentInfo?.qrImage),alt:"QR de Pago",class:"payment-image"},null,8,me)):(0,n.Q3)("",!0)])):(0,n.Q3)("",!0),ke.menuData?.businessInfo?.paymentInfo?.nequiNumber||ke.menuData?.businessInfo?.paymentInfo?.nequiImage?((0,n.uX)(),(0,n.CE)("div",pe,[a[26]||(a[26]=(0,n.Lk)("h3",null,"Pago con Nequi",-1)),ke.menuData?.businessInfo?.paymentInfo?.nequiImage&&ke.isValidImage(ke.menuData?.businessInfo?.paymentInfo?.nequiImage)?((0,n.uX)(),(0,n.CE)("img",{key:0,src:ke.fixImageFormat(ke.menuData?.businessInfo?.paymentInfo?.nequiImage),alt:"Nequi",class:"payment-image"},null,8,ve)):(0,n.Q3)("",!0),ke.menuData?.businessInfo?.paymentInfo?.nequiNumber?((0,n.uX)(),(0,n.CE)("p",fe,[a[25]||(a[25]=(0,n.Lk)("strong",null,"N√∫mero:",-1)),(0,n.eW)(" "+(0,t.v_)(ke.menuData?.businessInfo?.paymentInfo?.nequiNumber),1)])):(0,n.Q3)("",!0)])):(0,n.Q3)("",!0),ke.menuData?.businessInfo?.paymentInfo?.bankInfo?((0,n.uX)(),(0,n.CE)("div",ge,[a[28]||(a[28]=(0,n.Lk)("h3",null,"Pago Bancario",-1)),(0,n.Lk)("p",be,[a[27]||(a[27]=(0,n.Lk)("strong",null,"Informaci√≥n Bancaria:",-1)),(0,n.eW)(" "+(0,t.v_)(ke.menuData?.businessInfo?.paymentInfo?.bankInfo),1)])])):(0,n.Q3)("",!0),ke.menuData?.businessInfo?.paymentInfo?.otherPaymentMethods?((0,n.uX)(),(0,n.CE)("div",ye,[a[30]||(a[30]=(0,n.Lk)("h3",null,"Otras Formas de Pago",-1)),(0,n.Lk)("p",he,[a[29]||(a[29]=(0,n.Lk)("strong",null,"M√©todos Adicionales:",-1)),(0,n.eW)(" "+(0,t.v_)(ke.menuData?.businessInfo?.paymentInfo?.otherPaymentMethods),1)])])):(0,n.Q3)("",!0)])])):(0,n.Q3)("",!0),(0,n.Lk)("div",Ie,[a[32]||(a[32]=(0,n.Lk)("h3",{class:"text-center mb-4"},"¬øQuieres hacer una reserva?",-1)),(0,n.bF)(we)]),ke.toast.visible?((0,n.uX)(),(0,n.CE)("div",{key:3,class:(0,t.C4)(["toast-notification",ke.toast.type])},(0,t.v_)(ke.toast.message),3)):(0,n.Q3)("",!0)])]))],8,s)}o(4114),o(8111),o(2489),o(116),o(7588),o(1701),o(8237);var Le=o(953),Ee=o(5220),we=o(8982);async function Ce(e){try{if(console.log(`Intentando recuperar men√∫ con ID: ${e}`),!e)return console.error("ID de men√∫ no proporcionado"),null;let i=null;try{const a=await o.e(460).then(o.bind(o,3460)),n=await a.getMenuFromIndexedDB(e);n&&n.items&&n.items.length>0&&(console.log("Men√∫ recuperado desde IndexedDB:",n),i=n)}catch(a){console.warn("No se pudo obtener el men√∫ desde IndexedDB:",a)}if(!i||!i.items||0===i.items.length){console.log(`Obteniendo men√∫ desde el servidor con ID: ${e}`);try{const a=await Promise.resolve().then(o.bind(o,133)),n=await a.default.get(`/platos/menu/${e}`);if(n&&n.success&&n.data)console.log("Men√∫ recuperado desde el servidor:",n.data),i=n.data;else if(console.warn("No se pudo obtener el men√∫ desde el servidor:",n),!i)throw new Error("No se pudo obtener el men√∫")}catch(n){if(console.error("Error al obtener el men√∫ desde el servidor:",n),!i)try{const a=localStorage.getItem(`menu_${e}`);if(!a)throw new Error("No se encontr√≥ el men√∫ en la cach√©");i=JSON.parse(a),console.log("Men√∫ recuperado desde localStorage:",i)}catch(t){throw console.error("Error al recuperar men√∫ desde la cach√©:",t),new Error("No se pudo obtener el men√∫")}}}if(i&&!i.businessInfo)try{const e=await(0,we.By)();i.businessInfo=e}catch(r){console.warn("No se pudo obtener informaci√≥n del negocio:",r),i.businessInfo={name:"Restaurante WebSAP",description:"Deliciosa comida para todos los gustos",contact:"info@websap.com",address:"Calle Principal #123",logo:null,paymentInfo:{qrImage:null,qrTitle:"Escanea para pagar",nequiNumber:null,nequiImage:null,bankInfo:"Banco XYZ - Cuenta 123456789",otherPaymentMethods:"Aceptamos efectivo y tarjetas"}}}i&&i.businessInfo&&!i.businessInfo.paymentInfo&&(i.businessInfo.paymentInfo={qrImage:null,qrTitle:"Escanea para pagar",nequiNumber:null,nequiImage:null,bankInfo:"Banco XYZ - Cuenta 123456789",otherPaymentMethods:"Aceptamos efectivo y tarjetas"});try{localStorage.setItem(`menu_${e}`,JSON.stringify(i))}catch(s){console.warn("No se pudo guardar el men√∫ en localStorage:",s)}console.log("[getSharedMenu] Men√∫ recuperado:",i);const l=i?.items?.filter((e=>e.isSpecial))||[],c=i?.items?.filter((e=>!e.isSpecial))||[];return console.log("[getSharedMenu] Items especiales:",l.length),console.log("[getSharedMenu] Items regulares:",c.length),i}catch(i){throw console.error("Error al obtener el men√∫ compartido:",i),i}}var De=o(6429);const Ne={class:"reservas-section"},Pe={key:0,class:"reserva-form-container"},$e={class:"form-group"},qe={class:"form-group"},Se={class:"form-group"},Re={class:"form-group"},Ae={class:"form-group"},Qe={class:"form-group"},_e={class:"form-group"},Xe={class:"form-group"},Me={class:"form-group"},xe={class:"form-actions"},Te=["disabled"],Fe=["disabled"];function Ve(e,a,o,s,i,l){return(0,n.uX)(),(0,n.CE)("div",Ne,[(0,n.Lk)("button",{onClick:a[0]||(a[0]=(...e)=>s.toggleReservaForm&&s.toggleReservaForm(...e)),class:"toggle-reserva-button"},(0,t.v_)(s.showReservaForm?"Ocultar Formulario de Reserva":"Hacer una Reserva"),1),s.showReservaForm?((0,n.uX)(),(0,n.CE)("div",Pe,[a[21]||(a[21]=(0,n.Lk)("h3",null,"Reserva tu Mesa",-1)),(0,n.Lk)("form",{onSubmit:a[11]||(a[11]=(0,r.D$)(((...e)=>s.processReservation&&s.processReservation(...e)),["prevent"])),class:"reserva-form"},[(0,n.Lk)("div",$e,[a[12]||(a[12]=(0,n.Lk)("label",{for:"fullName"},"Nombre Completo *",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",id:"fullName","onUpdate:modelValue":a[1]||(a[1]=e=>s.reservationData.fullName=e),placeholder:"Ingresa tu nombre completo",required:""},null,512),[[r.Jo,s.reservationData.fullName]])]),(0,n.Lk)("div",qe,[a[13]||(a[13]=(0,n.Lk)("label",{for:"mobilePhone"},"Tel√©fono M√≥vil *",-1)),(0,n.bo)((0,n.Lk)("input",{type:"tel",id:"mobilePhone","onUpdate:modelValue":a[2]||(a[2]=e=>s.reservationData.mobilePhone=e),placeholder:"Ej. 612345678",required:""},null,512),[[r.Jo,s.reservationData.mobilePhone]])]),(0,n.Lk)("div",Se,[a[14]||(a[14]=(0,n.Lk)("label",{for:"landlinePhone"},"Tel√©fono Fijo",-1)),(0,n.bo)((0,n.Lk)("input",{type:"tel",id:"landlinePhone","onUpdate:modelValue":a[3]||(a[3]=e=>s.reservationData.landlinePhone=e),placeholder:"Opcional"},null,512),[[r.Jo,s.reservationData.landlinePhone]])]),(0,n.Lk)("div",Re,[a[15]||(a[15]=(0,n.Lk)("label",{for:"address"},"Direcci√≥n",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",id:"address","onUpdate:modelValue":a[4]||(a[4]=e=>s.reservationData.address=e),placeholder:"Tu direcci√≥n (opcional)"},null,512),[[r.Jo,s.reservationData.address]])]),(0,n.Lk)("div",Ae,[a[16]||(a[16]=(0,n.Lk)("label",{for:"email"},"Correo Electr√≥nico",-1)),(0,n.bo)((0,n.Lk)("input",{type:"email",id:"email","onUpdate:modelValue":a[5]||(a[5]=e=>s.reservationData.email=e),placeholder:"ejemplo@correo.com (opcional)"},null,512),[[r.Jo,s.reservationData.email]])]),(0,n.Lk)("div",Qe,[a[17]||(a[17]=(0,n.Lk)("label",{for:"reservationDate"},"Fecha de Reserva *",-1)),(0,n.bo)((0,n.Lk)("input",{type:"date",id:"reservationDate","onUpdate:modelValue":a[6]||(a[6]=e=>s.reservationData.date=e),required:""},null,512),[[r.Jo,s.reservationData.date]])]),(0,n.Lk)("div",_e,[a[18]||(a[18]=(0,n.Lk)("label",{for:"reservationTime"},"Hora de Reserva *",-1)),(0,n.bo)((0,n.Lk)("input",{type:"time",id:"reservationTime","onUpdate:modelValue":a[7]||(a[7]=e=>s.reservationData.time=e),required:""},null,512),[[r.Jo,s.reservationData.time]])]),(0,n.Lk)("div",Xe,[a[19]||(a[19]=(0,n.Lk)("label",{for:"peopleCount"},"N√∫mero de Personas *",-1)),(0,n.bo)((0,n.Lk)("input",{type:"number",id:"peopleCount","onUpdate:modelValue":a[8]||(a[8]=e=>s.reservationData.peopleCount=e),min:"1",max:"20",required:""},null,512),[[r.Jo,s.reservationData.peopleCount]])]),(0,n.Lk)("div",Me,[a[20]||(a[20]=(0,n.Lk)("label",{for:"specialNotes"},"Notas Adicionales",-1)),(0,n.bo)((0,n.Lk)("textarea",{id:"specialNotes","onUpdate:modelValue":a[9]||(a[9]=e=>s.reservationData.notes=e),placeholder:"Instrucciones especiales, preferencias, etc.",rows:"3"},null,512),[[r.Jo,s.reservationData.notes]])]),(0,n.Lk)("div",xe,[(0,n.Lk)("button",{type:"submit",class:"submit-button",disabled:s.isProcessing},(0,t.v_)(s.isProcessing?"Procesando...":"Reservar Mesa"),9,Te),(0,n.Lk)("button",{type:"button",class:"clear-button",onClick:a[10]||(a[10]=(...e)=>s.clearForm&&s.clearForm(...e)),disabled:s.isProcessing}," Limpiar ",8,Fe)])],32)])):(0,n.Q3)("",!0),s.toast.show?((0,n.uX)(),(0,n.CE)("div",{key:1,class:(0,t.C4)(["toast-notification",s.toast.type])},(0,t.v_)(s.toast.message),3)):(0,n.Q3)("",!0)])}var Oe=o(7051),Je={name:"ReservaForm",setup(){console.log("ReservaForm montado");const e=(0,Le.KR)(!1),a=(0,Le.Kh)({fullName:"",mobilePhone:"",landlinePhone:"",address:"",email:"",date:"",time:"",peopleCount:1,notes:""}),o=(0,Le.KR)(!1),n=(0,Le.Kh)({show:!1,message:"",type:"info"}),t=()=>{e.value=!e.value},r=(e,a="info")=>{n.message=e,n.type=a,n.show=!0,setTimeout((()=>{n.show=!1}),5e3)},s=()=>a.fullName.trim()?a.mobilePhone.trim()?a.date?a.time?!(!a.peopleCount||a.peopleCount<1)||(r("Por favor, indica el n√∫mero de personas","error"),!1):(r("Por favor, selecciona una hora para la reserva","error"),!1):(r("Por favor, selecciona una fecha para la reserva","error"),!1):(r("Por favor, ingresa un n√∫mero de tel√©fono m√≥vil","error"),!1):(r("Por favor, ingresa tu nombre completo","error"),!1),i=async()=>{if(s())try{o.value=!0;const e={fullName:a.fullName,mobilePhone:a.mobilePhone,landlinePhone:a.landlinePhone||"",email:a.email||"",address:a.address||"",date:a.date,time:a.time,peopleCount:a.peopleCount,notes:a.notes||"",status:"pending",source:"menu"};console.log("Enviando reserva al sistema:",e);const n={nombre:a.fullName,telefono:a.mobilePhone,email:a.email||"",fecha:a.date,hora:a.time,personas:a.peopleCount,notas:`Reserva desde men√∫ compartido: ${a.notes||"Sin notas adicionales"}`};console.log("Enviando reserva como mensaje de WhatsApp:",n);const t=await(0,De.sb)(n);if(console.log("Resultado de env√≠o como WhatsApp:",t),!t.success)throw new Error(t.error||"Error al guardar la reserva");const s=`\nüìÖ *NUEVA RESERVA DE MESA*\n---------------------------\nüë§ *Nombre:* ${a.fullName}\nüì± *Tel√©fono m√≥vil:* ${a.mobilePhone}\n${a.landlinePhone?`‚òéÔ∏è *Tel√©fono fijo:* ${a.landlinePhone}`:""}\n${a.email?`‚úâÔ∏è *Email:* ${a.email}`:""}\nüìÜ *Fecha:* ${a.date}\n‚è∞ *Hora:* ${a.time}\nüë• *Personas:* ${a.peopleCount}\n${a.notes?`üìù *Notas:* ${a.notes}`:""}\n---------------------------\nüåê Esta reserva fue realizada a trav√©s del sistema de reservas online.\n`,i=encodeURIComponent(s),c=`https://api.whatsapp.com/send?text=${i}`;window.open(c,"_blank"),r("¬°Reserva enviada correctamente! Tambi√©n puedes confirmarla por WhatsApp.","success"),l()}catch(e){console.error("Error al procesar la reserva:",e),r("Hubo un error al procesar tu reserva. Por favor, intenta nuevamente.","error")}finally{o.value=!1}},l=()=>{a.fullName="",a.mobilePhone="",a.landlinePhone="",a.address="",a.email="",a.date="",a.time="",a.peopleCount=1,a.notes=""};return{showReservaForm:e,reservationData:a,isProcessing:o,toast:n,toggleReservaForm:t,processReservation:i,clearForm:l}}},We=o(6262);const ze=(0,We.A)(Je,[["render",Ve],["__scopeId","data-v-732333be"]]);var Ue=ze,Ke=o(2949),je={name:"SharedMenuView",components:{ReservaForm:Ue},props:{id:{type:String,default:""}},setup(e){const a=(0,Ee.lq)(),t=(0,n.EW)((()=>e.id||a.params.id)),r=(0,Le.KR)({items:[],businessInfo:{name:"Restaurante WebSAP",description:"Deliciosa comida para todos los gustos",contact:"info@websap.com",address:"Calle Principal #123",logo:null,paymentInfo:{qrImage:null,qrTitle:"Escanea para pagar",nequiNumber:null,nequiImage:null,bankInfo:"Banco XYZ - Cuenta 123456789",otherPaymentMethods:"Aceptamos efectivo y tarjetas"}}}),s=(0,Le.KR)(!0),i=(0,Le.KR)(null),l=(0,Le.KR)([]),c=((0,Le.KR)(null),(0,Le.KR)(!1)),u=(0,Le.KR)(null);console.log("SharedMenuView montado, ID del men√∫:",a.params.id);const d=(0,Le.KR)({visible:!1,message:"",type:"success",timeoutId:null});(0,n.sV)((()=>{p(),Oe.A.on("business-info-updated",m),(0,Ke.D2)(!0)})),(0,n.hi)((()=>{Oe.A.off("business-info-updated",m),(0,Ke.Vg)(),d.value.timeoutId&&clearTimeout(d.value.timeoutId)}));const m=e=>{console.log("Nueva informaci√≥n del negocio recibida en SharedMenuView:",e),e&&(r.value.businessInfo={...e},u.value=Date.now(),h("Informaci√≥n del negocio actualizada","info"))};async function p(){try{if(s.value=!0,i.value=null,console.log("Cargando men√∫ con ID:",a.params.id),!a.params.id)return i.value="ID de men√∫ no especificado",void(s.value=!1);const d=localStorage.getItem(`cart_${a.params.id}`);if(d)try{l.value=JSON.parse(d),console.log("Carrito recuperado de localStorage:",l.value)}catch(e){console.error("Error al parsear carrito de localStorage:",e)}try{const e=await Ce(a.params.id);if(!e||!e.items)throw new Error("Datos de men√∫ no v√°lidos");r.value.items=e.items;try{const e=await(0,Ke.xr)();e&&(r.value.businessInfo=e,u.value=Date.now(),console.log("Informaci√≥n del negocio cargada del backend:",e))}catch(o){console.warn("No se pudo cargar informaci√≥n del negocio desde backend:",o),e.businessInfo&&(r.value.businessInfo=e.businessInfo)}console.log("Men√∫ cargado con √©xito:",r.value),r.value.items.forEach((e=>{e.availableQuantity=void 0!==e.availableQuantity?Number(e.availableQuantity):0,e.realAvailability=e.availableQuantity})),q();try{localStorage.setItem(`menu_${a.params.id}`,JSON.stringify(r.value))}catch(n){console.warn("No se pudo guardar el men√∫ en localStorage:",n)}}catch(t){console.error("Error al cargar el men√∫ desde la API:",t);try{const e=localStorage.getItem(`menu_${a.params.id}`);if(!e)throw new Error("No se encontr√≥ el men√∫ en cach√©");if(r.value=JSON.parse(e),console.log("Men√∫ recuperado desde localStorage:",r.value),!r.value||!r.value.items)throw new Error("Datos de men√∫ en cach√© no v√°lidos");r.value.items.forEach((e=>{e.availableQuantity=void 0!==e.availableQuantity?Number(e.availableQuantity):0,e.realAvailability=e.availableQuantity})),q(),h("Usando datos almacenados localmente. Algunas funciones pueden estar limitadas.","warning")}catch(c){console.error("Error al recuperar men√∫ desde cach√©:",c),i.value="No se encontr√≥ el men√∫ solicitado. Por favor, verifica el enlace o intenta m√°s tarde."}}}catch(e){console.error("Error general al cargar el men√∫:",e),i.value=e.message||"Error al cargar el men√∫"}finally{s.value=!1}}const v=(0,n.EW)((()=>{const e=r.value?.businessInfo?.paymentInfo;return!!e&&!!(e.qrImage&&S(e.qrImage)||e.qrTitle||e.nequiNumber||e.nequiImage&&S(e.nequiImage)||e.bankInfo||e.otherPaymentMethods)})),f=(0,n.EW)((()=>l.value.reduce(((e,a)=>e+a.quantity),0))),g=(0,n.EW)((()=>l.value.reduce(((e,a)=>e+a.price*a.quantity),0)));function b(e){if(isNaN(Number(e)))return"0,00";const a=Number(e).toFixed(2),[o,n]=a.split("."),t=o.replace(/\B(?=(\d{3})+(?!\d))/g,".");return`${t},${n}`}async function y(e){if(Number(e.availableQuantity)<=0)return void h(`Lo sentimos, "${e.name}" no est√° disponible actualmente. Intente m√°s tarde por favor.`,"error");const a=await P(e);if(!a)return;const o=l.value.find((a=>e.id&&a.id?a.id===e.id:a.name===e.name));o?o.quantity++:l.value.push({id:e.id||Date.now().toString(),name:e.name,price:e.price,quantity:1,availableQuantity:e.availableQuantity||0}),I(),q(),h(`${e.name} a√±adido al carrito`,"success")}function h(e,a="success",o=5e3){console.log(`[Toast] Mostrando notificaci√≥n: ${e} (${a})`),d.value.timeoutId&&clearTimeout(d.value.timeoutId),d.value.message=e,d.value.type=a,d.value.visible=!0,console.log(`[Toast] Estado: visible=${d.value.visible}, message=${d.value.message}`),d.value.timeoutId=setTimeout((()=>{console.log(`[Toast] Ocultando notificaci√≥n despu√©s de ${o}ms`),d.value.visible=!1}),o)}function I(){try{localStorage.setItem(`cart_${a.params.id}`,JSON.stringify(l.value))}catch(e){console.error("Error al guardar carrito en localStorage:",e)}}function k(e){const a=l.value[e],o=r.value.items?.find((e=>e.id===a.id));if(o){const e=o.availableQuantity||0;if(a.quantity>=e)return void h(`No hay m√°s unidades disponibles de "${a.name}"`,"warning")}a.quantity++,I(),q()}function L(e){l.value[e].quantity>1?(l.value[e].quantity--,I(),q()):E(e)}function E(e){l.value.splice(e,1),I(),q()}async function w(){try{if(0===l.value.length)return void h("No hay √≠tems en el pedido","error");if(!A.value.name||!A.value.phone)return void h("Por favor complete su nombre y tel√©fono","error");c.value=!0,await $(),D(),h("¬°Pedido completado! Gracias por tu compra.","success"),setTimeout((()=>{l.value=[],localStorage.removeItem(`cart_${a.params.id}`),A.value={name:"",phone:"",email:"",address:""},_.value="",c.value=!1}),2e3)}catch(i){console.error("Error al completar el pedido:",i),h("Error al procesar el pedido","error"),c.value=!1}}function C(){0!==l.value.length?A.value.name&&A.value.phone?(D(),h("Pedido compartido por WhatsApp","success")):h("Por favor complete su nombre y tel√©fono","error"):h("No hay √≠tems en el pedido","error")}function D(){let e=`üõí *Pedido de ${A.value.name}*\n\n`;e+="üì¶ *Productos:*\n",l.value.forEach((a=>{const o=(a.price*a.quantity).toFixed(2);e+=`üçΩÔ∏è ${a.quantity}x ${a.name} = $${b(o)}\n`})),e+=`\nüíµ *Total:* $${b(g.value)}\n`,A.value.phone&&(e+=`üìû *Tel√©fono:* ${A.value.phone}\n`),A.value.email&&(e+=`‚úâÔ∏è *Email:* ${A.value.email}\n`),A.value.address&&(e+=`üìç *Direcci√≥n:* ${A.value.address}\n`),_.value&&(e+=`üìù *Notas adicionales:*\n${_.value}\n`);const a="qr"===Q.value?"C√≥digo QR":"nequi"===Q.value?"Nequi":"Contra entrega";e+=`\nüí≥ *Forma de pago:* ${a}`;const o=encodeURIComponent(e),n=`https://api.whatsapp.com/send?text=${o}`;window.open(n,"_blank")}function N(){const e=document.querySelector(".order-section");e&&e.scrollIntoView({behavior:"smooth"})}async function P(e){const a=Number(e.availableQuantity)||0;if(a<=0)return h(`Lo sentimos, "${e.name}" no est√° disponible actualmente. Intente m√°s tarde por favor.`,"error"),!1;const o=l.value.find((a=>a.id===e.id)),n=o?o.quantity:0,t=a-n;return t<=0?(h(`No hay m√°s unidades disponibles de "${e.name}"`,"warning"),!1):(t<=5&&h(`¬°Solo quedan ${t} unidades de "${e.name}"!`,"warning"),!0)}async function $(){try{if(!l.value||0===l.value.length)return void console.warn("Intentando actualizar inventario con carrito vac√≠o");console.log(`Iniciando actualizaci√≥n de inventario para ${l.value.length} productos...`);const t=await(0,we.gL)();if(!t||!Array.isArray(t))return console.error("No se pudo obtener el men√∫ actual"),!1;const r=JSON.parse(JSON.stringify(l.value)),s=[];let i=!1;const{getSoldItems:c,saveSoldItems:u}=await Promise.resolve().then(o.bind(o,8982));let d=[];try{d=await c()||[],Array.isArray(d)||(d=[]),console.log("Lista de elementos vendidos obtenida:",d.length)}catch(e){console.warn("Error al obtener elementos vendidos:",e),d=[]}for(let e=0;e<r.length;e++){const o=r[e];console.log(`Procesando item ${e+1}/${r.length}: ${o.name} (ID: ${o.id})`);try{const e=t.find((e=>e.id===o.id));if(!e){console.warn(`Elemento no encontrado en el men√∫: ${o.name} (ID: ${o.id})`),s.push({name:o.name,success:!1,error:"Elemento no encontrado en el men√∫"});continue}const a=parseInt(Number(e.availableQuantity||0),10),n=parseInt(Number(o.quantity||0),10);if(isNaN(a)||isNaN(n)){const a=`Cantidades inv√°lidas para ${o.name}: disponible=${e.availableQuantity}, vendido=${o.quantity}`;console.error(a),s.push({name:o.name,success:!1,error:a}),i=!0;continue}const r=Math.max(0,a-n);console.log(`Actualizando ${o.name}: ${a} - ${n} = ${r} (currentQuantity tipo: ${typeof a}, soldQuantity tipo: ${typeof n})`);const l=await(0,we.eq)(e.id,r);if(s.push({name:o.name,oldQuantity:a,soldQuantity:n,newQuantity:r,success:l,error:l?null:"Error al actualizar disponibilidad"}),l){const a=(new Date).toISOString(),t=d.find((e=>e.name===o.name));t?(t.quantity+=n,t.date=a):d.push({name:o.name,quantity:n,price:o.price,includesDrink:e.includesDrink||!1,date:a}),console.log(`Elemento registrado en lista de vendidos: ${o.name} x${n}`)}else i=!0}catch(a){console.error(`Error procesando ${o.name}:`,a),s.push({name:o.name,success:!1,error:a.message||"Error desconocido"}),i=!0}}try{await u(d),console.log(`Lista de elementos vendidos actualizada con ${d.length} elementos`)}catch(n){console.error("Error al guardar elementos vendidos:",n)}const m=s.filter((e=>e.success)).length;if(console.log(`Actualizaci√≥n de inventario completada. √âxitos: ${m}/${r.length}`),console.log("Detalles de actualizaci√≥n de inventario:",s),i){const e=s.filter((e=>!e.success)).map((e=>e.name)).join(", ");console.warn(`Algunos productos no se pudieron actualizar: ${e}`)}return m>0}catch(i){return console.error("Error general al actualizar inventario:",i),!1}}function q(){r.value?.items&&r.value.items.forEach((e=>{const a=l.value.find((a=>a.id===e.id)),o=a?a.quantity:0,n=Number(e.availableQuantity)||0;e.realAvailability=n-o,console.log(`Disponibilidad actualizada para ${e.name}: ${e.realAvailability} unidades (base: ${n}, carrito: ${o})`)}))}function S(e){return!!e&&(!(!e.startsWith("http://")&&!e.startsWith("https://"))||!!e.startsWith("data:image/"))}function R(e){return e?S(e)?e:e.includes("/9j/")&&!e.startsWith("data:image/")?`data:image/jpeg;base64,${e}`:"":""}const A=(0,Le.KR)({name:"",phone:"",email:"",address:""}),Q=(0,Le.KR)("cash"),_=(0,Le.KR)(""),X=(0,n.EW)((()=>{if(!r.value||!r.value.items)return[];const e=r.value.items.filter((e=>!e.isSpecial));return console.log("Platos regulares:",e.length,e.map((e=>e.name))),e})),M=(0,n.EW)((()=>{if(!r.value||!r.value.items)return[];const e=r.value.items.filter((e=>!0===e.isSpecial));return console.log("Platos especiales:",e.length,e.map((e=>e.name))),e})),x=(0,Le.KR)(!1),T=(0,Le.KR)(!1),F=(0,Le.KR)(!1),V=(0,Le.KR)(null),O=(0,Le.KR)({fullName:"",mobilePhone:"",landlinePhone:"",address:"",email:"",orderDate:J(),reservationDate:"",reservationTime:"",peopleCount:1,additionalNotes:""});function J(){const e=new Date,a=e.getFullYear(),o=String(e.getMonth()+1).padStart(2,"0"),n=String(e.getDate()).padStart(2,"0");return`${a}-${o}-${n}`}async function W(){T.value=!0,F.value=!1,V.value=null;try{const e=await(0,De.S1)(O.value);if(!e.success)throw new Error(e.error||"Error al procesar la reserva");F.value=!0,h("¬°Reserva enviada con √©xito! Recibir√° un correo de confirmaci√≥n en breve.","success"),console.log("Enviando correo de confirmaci√≥n a:",O.value.email),setTimeout((()=>{U(),x.value=!1}),3e3)}catch(i){console.error("Error al enviar la reserva:",i),V.value="Ocurri√≥ un error al procesar su reserva. Por favor, intente nuevamente.",h("Error al procesar la reserva. Por favor, intente nuevamente.","error")}finally{T.value=!1}}function z(){U(),x.value=!1}function U(){O.value.fullName="",O.value.mobilePhone="",O.value.landlinePhone="",O.value.address="",O.value.email="",O.value.orderDate=J(),O.value.reservationDate="",O.value.reservationTime="",O.value.peopleCount=1,O.value.additionalNotes="",F.value=!1,V.value=null}async function K(){try{const e=await(0,Ke.xr)(!0);e&&(r.value.businessInfo=e,u.value=Date.now(),h("Informaci√≥n del negocio actualizada","success"))}catch(i){console.error("Error al refrescar informaci√≥n del negocio:",i),h("Error al actualizar informaci√≥n del negocio","error")}}return{menuId:t,isLoading:s,error:i,menuData:r,regularItems:X,specialItems:M,cartItems:l,cartTotal:g,totalItems:f,customerInfo:A,selectedPaymentMethod:Q,additionalMessage:_,addToCart:y,removeFromCart:E,increaseQuantity:k,decreaseQuantity:L,formatPrice:b,completeOrder:w,shareOrderByWhatsApp:C,scrollToOrder:N,isValidImage:S,fixImageFormat:R,hasPaymentInfo:v,showReservationForm:x,reservationData:O,isProcessingReservation:T,reservationSuccess:F,reservationError:V,submitReservation:W,cancelReservation:z,getCurrentDate:J,toast:d,refreshBusinessInfo:K,lastBusinessInfoUpdate:u}}};const Be=(0,We.A)(je,[["render",ke],["__scopeId","data-v-50a3da36"]]);var He=Be},8237:function(e,a,o){var n=o(6518),t=o(2652),r=o(9306),s=o(8551),i=o(1767),l=TypeError;n({target:"Iterator",proto:!0,real:!0},{reduce:function(e){s(this),r(e);var a=i(this),o=arguments.length<2,n=o?void 0:arguments[1],c=0;if(t(a,(function(a){o?(o=!1,n=a):n=e(n,a,c),c++}),{IS_RECORD:!0}),o)throw new l("Reduce of empty iterator with no initial value");return n}})}}]);
//# sourceMappingURL=shared-menu.1b5639c6.js.map